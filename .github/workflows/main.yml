# on:
#   push:
#     branches:
#       - main
# name: ðŸš€ Deploy website on push
# jobs:
#   web-deploy:
#     name: ðŸŽ‰ Deploy
#     runs-on: ubuntu-latest
#     steps:
#     - name: ðŸšš Get latest code
#       uses: actions/checkout@v2.3.2
    
#     - name: ðŸ“¦ Compile css and javascript
#       run: npm install && npm run build

#       - name:



#     - name: ðŸ“‚ Sync files
#       uses: SamKirkland/FTP-Deploy-Action@4.0.0
#       with:
#         server: ftp.najmulhasan.xyz
#         username: najmulha
#         password: 8o@V1uL9jRF0-o
#         server-dir: /public_html/


name: Deploy Laravel Application

on:
  push:
    branches:
      - main 

jobs:

  create-deployment-artifacts:

    name: Create Deployment Artifacts

    runs-on: ubuntu-latest

    steps:

      - uses: actions/checkout@v2

      - name: Compile css and javascript

        run: |
          npm install
          npm run dev
          

      - name: Configure PHP 8.1

        uses: shivammathur/setup-php@master

        with: 

          php-version: 8.1

          extensions: mbstring, intl, bcmath, pdo, pdo_mysql, zip, exif, pcntl, gd, soap, xsl, xml, xmlrpc, zip, opcache, mysqli, curl, dom, fileinfo, ftp, json, pdo_sqlite, sqlite3, tokenizer, xml, xmlreader, xmlwriter, xdebug, imagick, imap, ldap, memcached, mongodb, redis, ssh2, yaml, apcu, apcu_bc, igbinary, msgpack, oauth, raphf, propro, pthreads, uuid, xhprof, zmq, amqp, ast, ds, enchant, gmagick, gnupg, grpc, gmp

      - name: Install Composer

        run: composer install --no-dev --prefer-dist --optimize-autoloader --no-interaction --no-progress --no-suggest


